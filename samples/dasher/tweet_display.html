<!doctype html>
<html>
<head>
	<meta charset="utf-8">
    <title>Stream reader</title>
    <script>
    widget.config({
      "name": "tweet_display",
      "version": "1.0.0",
      "title": "Display a number of tweets",
      "desc": "Receives a bunch of tweets and displays them",
      "url": "http://github.com/premasagar/sqwidget/plugins", // get the widget, via your taskbar
	  "ui" : "hostpage",
	   dependencies: [
			'messaging'
		],
    });
	</script>
	<script type="text/javascript" charset="utf-8">
		widget.ready(function() {
		    widget.setTemplate('default');
		    var stream = widget.getSetting('stream');
		    // set name of list
		    jQuery('p',container).html('Messages received by ' + container.id + ' listening to stream ' + stream);
		    // replace with set of messages
		    plugins.messaging.listen(stream, function(event,tweets) {
		        var feedUl = jQuery('.tweet_list', container),
		            articleHtml;
		        alert('got tweets');
		        // fill in a basic template
		        jQuery.each(tweets, function(t, tweet) {
		            articleHtml = widget.renderWithTemplate('tweet', tweet);
                    // inject into template
                    feedUl.append(articleHtml);
		        });
		    });
		});
	</script>
	<script type="text/template" id="loading">
	    <p>Loading...</p>
	</script>
	<script type="text/template" id="tweet">
	    <li>{{tweet.text}}</li>
``	</script>
</head>

<body>
    <p></p>
    <ul class="tweet_list">        
    </ul>
</body>
</html>
